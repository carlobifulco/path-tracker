// Generated by CoffeeScript 1.3.3
(function() {
  var onclose, onmessage, onopen, render, render_template, ws_url,
    _this = this;

  ws_url = 'ws://localhost:4567/test';

  window.ws_url = ws_url;

  render = function(data, html) {
    var hb, results;
    if (typeof data === "string") {
      data = JSON.parse(data);
      console.log(data);
    }
    hb = Handlebars.compile(html);
    results = hb(data);
    return results;
  };

  window.render = render;

  render_template = function(id, data) {
    return $("#" + id + "_html").html(render(data, ($("#" + id + "_template")[0]).innerHTML));
  };

  window.render_template = render_template;

  onclose = function() {
    console.log("a new socket is being made dude...");
    window.s = new WebSocket(ws_url);
    window.s.onclose = onclose;
    window.s.onmessage = onmessage;
    return window.s.onclose = onclose;
  };

  onmessage = function(m) {
    return console.log(m.data);
  };

  onopen = function() {
    return console.log("We are open my dear dude");
  };

  $(document).ready(function() {
    console.log("I am loaded; USE show(id) to update entry");
    window.s = new WebSocket(ws_url);
    window.s.onclose = onclose;
    window.s.onmessage = onmessage;
    return window.s.onclose = onclose;
  });

}).call(this);
